<ion-header>
  <ion-navbar>
    <ion-title *ngIf="item"><p>{{item.properties.title}}</p></ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-card *ngIf="item">
    <ion-item >
      <ion-avatar item-left>
        <img data-src="{{item.properties.user.profile_picture_url}}"/>
      </ion-avatar>

      <ion-row center>
        <ion-col class="date">
          <b>{{item.properties.user.username}}</b>
        </ion-col>
        <ion-col>
          <p>{{item.properties.created_at | amTimeAgo}}</p>
        </ion-col>
      </ion-row>

      <ion-row center>
        <p class="address">{{item.properties.address}}</p>

        <button ion-button outline item-right (click)="showMap()">
          {{item.properties.distance}}
        </button>
      </ion-row>
    </ion-item>

    <ion-item>
      <ion-row *ngFor="let image of item.properties.images">
        <ion-col>
          <img src="{{image.itemshot.thumbnail__400x400}}" swiper-lazy zoom-pan>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col offset-50>
          <span class="price">{{item.properties.price | number}} 원</span>
        </ion-col>
      </ion-row>
    </ion-item>

    <ion-card-content><p>{{item.properties.title}}</p>{{item.properties.memo}}</ion-card-content>
    <ion-item>
      <ion-row>
        <ion-col>
          <div *ngIf="comments"><p>{{comments.length}} 댓글</p></div>
        </ion-col>
      </ion-row>
    </ion-item>

    <ion-list>
      <ion-item *ngFor="let comment of comments">
        <ion-avatar item-left>
          <img data-src="{{comment.user.profile_picture_url}}"/>
        </ion-avatar>
        <ion-row>
          <ion-col class="comment">
            <p><b>{{ comment.user_name }}</b>&nbsp;{{ comment.comment }}</p>
          </ion-col>
        </ion-row>

        <ion-row>
          <p>{{ comment.submit_date | amTimeAgo}}</p>
        </ion-row>

      </ion-item>
    </ion-list>

  <ion-fab bottom right *ngIf="item_owner">
    <button ion-fab mini><ion-icon name="md-arrow-dropup-circle"></ion-icon></button>
    <ion-fab-list side="top">
      <button ion-fab (click)="deleteItem(item)"><ion-icon name="md-trash"></ion-icon></button>
    </ion-fab-list>
  </ion-fab>

  </ion-card>


</ion-content>

<ion-footer>
  <ion-toolbar>
    <form [formGroup]="commentForm" id="commentForm">
      <ion-item>
        <ion-input formControlName="comment" placeholder="{{placeholder_comment}}" name="comment" class="comment"></ion-input>
        <button type="submit" ion-button outline item-right (click)="postComment()" [disabled]="comment_disabled" form="commentForm">등록</button>
      </ion-item>
    </form>
  </ion-toolbar>
</ion-footer>
