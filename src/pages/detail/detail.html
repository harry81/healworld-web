<ion-header>
  <ion-navbar>
    <ion-title *ngIf="item"><p>{{item.properties.title}}</p></ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <ion-card *ngIf="item">
    <ion-grid>
      <ion-row>
        <ion-col width-20>
          <ion-avatar item-left>
            <img data-src="{{item.properties.user.profile_picture_url}}"/>
          </ion-avatar>
        </ion-col>

        <ion-col>
          <ion-row>
            <ion-col text-left>
              <b>{{item.properties.user.username}}</b>
            </ion-col>
          </ion-row>

          <ion-row width-20 center>
            <ion-col text-left>
              <p class="address">{{item.properties.address}}</p>
            </ion-col>
            <ion-col>
              <button ion-button outline item-right (click)="showMap()">
                {{item.properties.distance}}
              </button>
            </ion-col>
          </ion-row>
        </ion-col>

      </ion-row>
    </ion-grid>

    <ion-item>
      <ion-row *ngFor="let image of item.properties.images">
        <ion-col>
          <img src="{{image.itemshot.thumbnail__1200x1200}}" swiper-lazy zoom-pan>
        </ion-col>
      </ion-row>

      <ion-row padding-top padding-bottom>
        <ion-col class="short-info">
          {{item.properties.created_at | amTimeAgo}}
        </ion-col>

        <ion-col>
          <span class="price">{{item.properties.price | number}} 원</span>
        </ion-col>
      </ion-row>
    </ion-item>

    <ion-card-content><p>{{item.properties.title}}</p>{{item.properties.memo}}</ion-card-content>
    <ion-item>
      <ion-row>
        <ion-col>
          <div *ngIf="comments"><p>{{comments.length}} 댓글</p></div>
        </ion-col>
      </ion-row>
    </ion-item>

    <ion-list>
      <ion-item *ngFor="let comment of comments" item-text-wrap>
        <ion-avatar item-left class="comment-img" >
          <img data-src="{{comment.user.profile_picture_url}}"/>
        </ion-avatar>
        <ion-row>
          <ion-col class="comment">
            <p><b>{{ comment.user_name }}</b></p>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col class="comment" item-text-wrap>
            <p item-text-wrap>{{ comment.comment }}</p>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col text-right>
            <p>{{ comment.submit_date | amTimeAgo}}</p>
          </ion-col>
        </ion-row>
      </ion-item>
    </ion-list>
  </ion-card>

</ion-content>

<ion-footer>
  <ion-toolbar>
    <form [formGroup]="commentForm" id="commentForm">
      <ion-item>
        <ion-input formControlName="comment" placeholder="{{placeholder_comment}}" (tap)="checkLogin()" name="comment" class="comment"></ion-input>
        <button type="submit" ion-button outline item-right (click)="postComment()" [disabled]="comment_disabled" form="commentForm">등록</button>
      </ion-item>
    </form>
  </ion-toolbar>
</ion-footer>
